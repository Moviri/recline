<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Demos - Composed View</title>

    <script type="text/javascript" src="../../vendor/jquery/jquery-1.8.2.js"></script>
<script type="text/javascript" src="../../vendor/jquery/jquery.1.2.1.ba-bbq.min.js"></script>
<script type="text/javascript" src="../../vendor/jQueryUi/jquery-ui-1.8.23.custom.js"></script>


<link type="text/css" href="../../vendor/jQueryUi/jquery-ui-1.8.23.custom.css" rel="stylesheet" />

<script type="text/javascript" src="../../vendor/jquery-slider/js/jquery.slider.js"></script>
<link type="text/css" href="../../vendor/jquery-slider/css/jquery.slider.min.css" rel="stylesheet" />


    
<!-- NVD3 & D3 libraries -->
<script type="text/javascript" src="../../vendor/d3/v2/d3.v2.min.js"></script>

<link rel="stylesheet" href="../../vendor/nvd3/0.0.1/nv.d3.css">

<script type="text/javascript" src="../../vendor/nvd3/0.0.1/nv.d3.js"></script>
<script type="text/javascript" src="../../vendor/nvd3/0.0.1/tooltip.js"></script>
<script type="text/javascript" src="../../vendor/nvd3/0.0.1/utils.js"></script>
<script type="text/javascript" src="../../vendor/nvd3/0.0.1/models/legend.js"></script>
<script type="text/javascript" src="../../vendor/nvd3/0.0.1/models/axis.js"></script>
<script type="text/javascript" src="../../vendor/nvd3/0.0.1/models/scatter.js"></script>
<script type="text/javascript" src="../../vendor/nvd3/0.0.1/models/line.js"></script>
<script type="text/javascript" src="../../vendor/nvd3/0.0.1/models/lineChart.js"></script>


<!--<script type="text/javascript" src="https://raw.github.com/Moviri/nvd3/master/nv.d3.min.js"></script>-->

<!--
<script type="text/javascript" src="https://raw.github.com/Moviri/nvd3/master/src/tooltip.js"></script>
<script type="text/javascript" src="https://raw.github.com/Moviri/nvd3/master/src/utils.js"></script>
<script type="text/javascript" src="https://raw.github.com/Moviri/nvd3/master/src/models/legend.js"></script>
<script type="text/javascript" src="https://raw.github.com/Moviri/nvd3/master/src/models/axis.js"></script>
<script type="text/javascript" src="https://raw.github.com/Moviri/nvd3/master/src/models/scatter.js"></script>
<script type="text/javascript" src="https://raw.github.com/Moviri/nvd3/master/src/models/line.js"></script>
<script type="text/javascript" src="https://raw.github.com/Moviri/nvd3/master/src/models/lineChart.js"></script>


-->

    

<script type="text/javascript" src="../../vendor/underscore/1.3.3/underscore.js"></script>
<script type="text/javascript" src="../../vendor/backbone/0.9.2/backbone.js"></script>
<script type="text/javascript" src="../../vendor/mustache/0.5.0-dev/mustache.js"></script>


<script type="text/javascript" src="../../vendor/moment/1.6.2/moment.js"></script>
<script type="text/javascript" src="../../vendor/crossfilter/1.1.0/crossfilter.min.js"></script>
<script type="text/javascript" src="../../vendor/kartograph/unversioned/chroma.min.js"></script>


<script type="text/javascript" src="../..//dist/recline.dataset.js"></script>
<script type="text/javascript" src="../..//dist/recline.js"></script>

    <script type="text/javascript" src="../../vendor/bootstrap/2.1.1/js/bootstrap.js"></script>
<link rel="stylesheet" href="../../vendor/bootstrap/2.1.1/css/moda/bootstrap.css" />

    <link rel="stylesheet" href="../../vendor/leaflet/0.4.4/leaflet.css">
<!--[if lte IE 8]>
<link rel="stylesheet" href="../../vendor/leaflet/0.4.4/leaflet.ie.css" />
<![endif]-->
<link rel="stylesheet" href="../../vendor/leaflet.markercluster/MarkerCluster.css">
<link rel="stylesheet" href="../../vendor/leaflet.markercluster/MarkerCluster.Default.css">
<!--[if lte IE 8]>
<link rel="stylesheet" href="../../vendor/leaflet.markercluster/MarkerCluster.Default.ie.css" />
<![endif]-->

 <script type="text/javascript" src="../../vendor/leaflet/0.4.4/leaflet.js"></script>


  <script type="text/javascript" src="../../vendor/leaflet/0.4.4/leaflet.js"></script>
  <script type="text/javascript" src="../../vendor/leaflet.markercluster/leaflet.markercluster.js"></script>


      <link rel="stylesheet" href="../../vendor/slickgrid/2.0.2/slick.grid.css">


  <script type="text/javascript" src="../../vendor/slickgrid/2.0.2/jquery.event.drag-2.0.min.js"></script>
  <script type="text/javascript" src="../../vendor/slickgrid/2.0.2/slick.grid.js"></script>
  <script type="text/javascript" src="../../vendor/slickgrid/2.0.2/slick.core.js"></script>
  <script type="text/javascript" src="../../vendor/slickgrid/2.0.2/slick.editors.js"></script>
  <script type="text/javascript" src="../../vendor/slickgrid/2.0.2/slick.formatters.js"></script>
  <script type="text/javascript" src="../../vendor/slickgrid/2.0.2/slick.cellrangeselector.js"></script>
  <script type="text/javascript" src="../../vendor/slickgrid/2.0.2/slick.cellselectionmodel.js"></script>
  <script type="text/javascript" src="../../vendor/slickgrid/2.0.2/slick.rowselectionmodel.js"></script>
  <script type="text/javascript" src="../../vendor/slickgrid/2.0.2/slick.grid.js"></script>



    
        <!-- raphael -->
<script type="text/javascript" src="../../vendor/raphael/2.1.0/raphael-min.js"></script>
        <!-- kartograph -->
<script type="text/javascript" src="../../vendor/kartograph/unversioned/kartograph.js"></script>


    <link rel="stylesheet" href="../../vendor/rickshaw/1.1.2/rickshaw.min.css">
<script type="text/javascript" src="../../vendor/rickshaw/1.1.2/rickshaw.min.js"></script>

        <!--
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Class.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Compat.ClassList.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.Renderer.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.Renderer.Area.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.Renderer.Line.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.Renderer.Bar.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.Renderer.ScatterPlot.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.RangeSlider.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.HoverDetail.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.Annotate.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.Legend.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.Axis.Time.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.Behavior.Series.Toggle.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.Behavior.Series.Order.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.Behavior.Series.Highlight.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.Smoother.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.Unstacker.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Fixtures.Time.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Fixtures.Number.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Fixtures.RandomData.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Fixtures.Color.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Color.Palette.js"></script>
<script src="../../vendor/rickshaw/1.1.2/src/Rickshaw.Graph.Axis.Y.js"></script>
        -->


   
    <script type="text/javascript" src="../../vendor/chosen/chosen.jquery.min.js"></script>
<link rel="stylesheet" href="../../vendor/chosen/chosen.css" />


    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-36323657-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>


</head>
<body>


<div class="container-fluid">
    <div class="row-fluid">

        <div class="span3">
            <div id="grid1"></div>
<pre>
var dataset = new recline.Model.Dataset({
 records:[
  {gender:"Female", age:5, visits:10},
  {gender:"Female", age:12, visits:30},
  {gender:"Male", age:13, visits:40},
  {gender:"Male", age:14, visits:50}],
fields:[
  {id:'gender', type:'string'},
  {id:'age', type:'integer' },
  {id:'visits', type:'integer' }]
});

dataset.queryState.addFacetNoEvent("gender");

</pre>

<pre>
    style
        .composedview_table {
            display: table ;
        }
        .composedview_table .cell {
            display: table-cell ;
            border: 1px solid
        }
        .composedview_table .cell_name {
        }
        .composedview_table .cell_graph {
            height: 300px;
        }
        .composedview_table .cell_title {
        }
        .composedview_table .c_row {
            display: table-row;
        }
        .composedview_table .c_group {
        }
        .composedview_table .c_header {
            display: table-header-group;
        }
        .composedview_table .c_body {
            display: table-row-group;
        }
        .composedview_table .c_footer {
            display: table-footer-group;
        }

</pre>




        </div>

        <div class="span4">
<pre>
var $el = $('#composed');
var composed = new recline.View.Composed({
 model: dataset,
 el:$el,
 groupBy: "gender",
 template: "horizontal",
 measures: [{
  title: "Visits",
  view: "NVD3Graph",
  props: {
   state: {
    group: ["age"],
    series: {type: "byFieldName", valuesField: ["visits"]},
    graphType: "pieChart"
    }
  }
 }]
});
</pre>

            <div id="composed"></div>
        </div>

        <div class="span4">
<pre>
var $el = $('#composed');
var composed = new recline.View.Composed({
 model: dataset,
 el:$el,
 dimension: "gender",
 template: "vertical",
 measures: [{
  title: "Visits",
  view: "NVD3Graph",
  props: {
   state: {
    group: ["age"],
    series: {type: "byFieldName", valuesField: ["visits"]},
    graphType: "multiBarChart"
    }
  }
 }]
});
</pre>

            <div id="composed2"></div>
        </div>


    </div>
</div>
    <style>
        .composedview_table {
            display: table ;
        }
        .composedview_table .cell {
            display: table-cell ;
            border: 1px solid
        }
       .composedview_table .cell_name {
        }
        .composedview_table .cell_graph {
           height: 300px;
        }
        .composedview_table .cell_title {
        }
        .composedview_table .c_row {
            display: table-row;
        }
        .composedview_table .c_group {
        }
        .composedview_table .c_header {
            display: table-header-group;
        }
        .composedview_table .c_body {
            display: table-row-group;
        }
        .composedview_table .c_footer {
            display: table-footer-group;
        }
    </style>

    <script>

        var dataset = new recline.Model.Dataset({
            records:[
                {id:0, country:'Italy', gender:"Female", age:5, visits:10},
                {id:2, country:'Italy', gender:"Female", age:12, visits:30},
                {id:3, country:'Italy', gender:"Male", age:13, visits:40},
                {id:4, country:'Italy', gender:"Male", age:14, visits:50}
            ],

            fields:[
                {id:'id'},
                {id:'country', type:'string'},
                {id:'gender', type:'string'},
                {id:'age', type:'integer' },
                {id:'visits', type:'integer' }
            ]
        });

        dataset.queryState.addFacetNoEvent("gender");

        var $el = $('#grid1');
        var grid1 = new recline.View.SlickGrid({
            model:dataset,
            el:$el,
            state:{
                fitColumns:true,
                useHoverStyle:true,
                useStripedStyle:true,
                useCondensedStyle:true
            }
        });
        grid1.visible = true;
        grid1.render();


        var $el = $('#composed');
        var composed = new recline.View.Composed({
            model:          dataset,
            el:$el,
            groupBy: "gender",
            template: "horizontal",
            measures: [{
                title: "Visits",
                view: "NVD3Graph",
                props: {
                    state: {
                        group: ["age"],
                        series: {type: "byFieldName", valuesField: ["visits"]},
                        options: {trendlines:true, minmax: true, tooltips: true, tooltip: "Key: {key} X: {x} Y: {y}",
                            staggerLabels: true, showValues: true},
                        graphType: "pieChart"
                    }
                }
            }
            ]

        });




        var $el = $('#composed2');
        var composed2 = new recline.View.Composed({
            model:          dataset,
            el:$el,
            dimension: "gender",
            template: "vertical",
            measures: [{
                title: "Visits",
                view: "NVD3Graph",
                props: {
                    state: {
                        group: ["age"],
                        series: {type: "byFieldName", valuesField: ["visits"]},
                        options: {trendlines:true, minmax: true, tooltips: true, tooltip: "Key: {key} X: {x} Y: {y}",
                            staggerLabels: true, showValues: true},
                        graphType: "multiBarChart"
                    }
                }
            }
            ]

        });
        composed2.visible = true;

        dataset.fetch();
    </script>






</body>
</html>
